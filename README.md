# VoiceNaviPlus
VoiceNaviPlus / こえナビ+ は、ETS2向けに作られた外部音声ナビです。

# 環境
ETS2が不便なく動作するスペック
.NET Framework 4.8 ランタイム
ランタイム[こちらからダウンロードできます](https://dotnet.microsoft.com/ja-jp/download/dotnet-framework/net48)。

# 仕組み
dllファイルをETS2のpluginフォルダに入れておくと、ETS2がそのdllファイルを読み込んでくれます。
同梱のdllファイルは、ナビ音声のデータを共有メモリに吐き出すという動作をします。
なお、このdllファイルは、[dariowouters氏が公開している](https://github.com/dariowouters/ts-fmod-plugin)マルチプレイでもサウンド系modが使えるようにするプログラムを、焼きすぎた鮭が改変(サウンドを流す処理を削除・共有メモリへの書き込み処理を追加)したものになります。

# インストール方法
現在の最新バージョンであるv0.1用の手順を解説しています。今後変わる可能性があります。

## dllの配置
zipに同梱している`ts-fmod-plugin.dll`をETS2のプラグインフォルダーの中にコピーします。
steamのライブラリでETS2を右クリックし、「管理」→「ローカルファイルを閲覧」と進みます。
エクスプローラーが開きますので、「bin」→「win_x64」→「plugins」と進み、(「plugins」フォルダーがなければ作ってください)「plugins」フォルダーの中に`ts-fmod-plugin.dll`をコピーします。
ファイル名は変えてもOKですが、拡張子は変えないようにしてください。

## 音声ファイルの作成
音声ファイルは`.wav`にのみ対応しています。
作成には多くの場合文章読み上げソフトを使うことになると思います。
文章読み上げソフトの中には音声ファイルの配布を禁止しているものがあるため、音声ファイルの扱いには注意してください。

## 音声ファイルの配置
音声ファイルを配置する場所は`exeファイルのあるフォルダー\profiles\[任意のフォルダー名]\`です。このときのフォルダー名が後で出てくるプロファイル名となります。
なお、このソフトはファイル名先頭4ケタの数字で流す音声ファイルを識別しているので、ファイル名の先頭には4桁数字を入れてください。
4桁数字と内容の組み合わせは[idList.md](https://github.com/yakisugita/VoiceNaviPlus/blob/master/idList.md)に記載しています。
数字の後ろはキャラクター名やセリフを書いておくと判別しやすいと思います。

## ソフトの起動
ソフトを起動したらプロファイルを選択してください。v0.1では保存機能を搭載していないため、起動後は必ずこの動作が必要です。

## ETS2の設定
ETS2のプロファイルを読み込んだら、「オーディオ」設定から音声案内を有効にし、「言語と音声」に何か適当な言語を設定してください。
そのあと、音声案内の音量を0にしてください。
この操作を忘れると読み上げされなかったり、二重に音声が流れたりします。